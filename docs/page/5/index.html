<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"md.zxzyl.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>


  <meta property="og:type" content="website">
<meta property="og:title" content="Zhongxu&#39;s blog">
<meta property="og:url" content="https://md.zxzyl.com/page/5/index.html">
<meta property="og:site_name" content="Zhongxu&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jason">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://md.zxzyl.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Zhongxu's blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a3b5d3f466edb3e3f15e8238d8f04be8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zhongxu's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1065/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1065/" class="post-title-link" itemprop="url">RefSeq的gtf文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-05 04:31:49" itemprop="dateCreated datePublished" datetime="2019-12-05T04:31:49+08:00">2019-12-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>注释有很多版本，比如ensembl，gencode, ucsc known gene, NCBI的RefSeqGene。最近就需要NM id的注释，但NCBI提供的是gff3格式的，而且很乱。用UCSC table browser下载的gtf版本的RefSeq，没有转录本和基因之间的关系，也没有基因symbol。</p>
<p>比如Ensembl，其实Ensembl的gtf挺好用的，不过这次我因为需要NM编号的注释（笨方法是将ensembl id转成NCBI的refSeq的ID，但这不是最优的方法，ID mapping有可能对不上，不如直接用NM的注释）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chr1    ensembl_havana  gene    11869   14412   .       +       .       gene_id &quot;ENSG00000223972&quot;; gene_version &quot;4&quot;; gene_name &quot;DDX11L1&quot;; gene_source &quot;ensembl_havana&quot;; gene_biotype &quot;pseudogene&quot;;</span><br><span class="line">chr1    havana  transcript      11869   14409   .       +       .       gene_id &quot;ENSG00000223972&quot;; gene_version &quot;4&quot;; transcript_id &quot;ENST00000456328&quot;; transcript_version &quot;2&quot;; gene_name &quot;DDX11L1&quot;; gene_source &quot;ensembl_havana&quot;; gene_biotype &quot;pseudogene&quot;; transcript_name &quot;DDX11L1-002&quot;; transcript_source &quot;havana&quot;; transcript_biotype &quot;processed_transcript&quot;; havana_transcript &quot;OTTHUMT00000362751&quot;; havana_transcript_version &quot;1&quot;; tag &quot;basic&quot;;</span><br><span class="line">chr1    havana  exon    11869   12227   .       +       .       gene_id &quot;ENSG00000223972&quot;; gene_version &quot;4&quot;; transcript_id &quot;ENST00000456328&quot;; transcript_version &quot;2&quot;; exon_number &quot;1&quot;; gene_name &quot;DDX11L1&quot;; gene_source &quot;ensembl_havana&quot;; gene_biotype &quot;pseudogene&quot;; transcript_name &quot;DDX11L1-002&quot;; transcript_source &quot;havana&quot;; transcript_biotype &quot;processed_transcript&quot;; havana_transcript &quot;OTTHUMT00000362751&quot;; havana_transcript_version &quot;1&quot;; exon_id &quot;ENSE00002234944&quot;; exon_version &quot;1&quot;; tag &quot;basic&quot;;</span><br></pre></td></tr></table></figure>




<p>UCSC table browser下载的refGene的gtf，这个文件不对的地方是gene id和transcript id是一个，而我需要gene和transcript的关系</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chr1    hg19_refGene    exon    66999276        66999355        0.000000        +       .       gene_id &quot;NM_001308203&quot;; transcript_id &quot;NM_001308203&quot;;</span><br><span class="line">chr1    hg19_refGene    start_codon     67000042        67000044        0.000000        +       .       gene_id &quot;NM_001308203&quot;; transcript_id &quot;NM_001308203&quot;;</span><br><span class="line">chr1    hg19_refGene    CDS     67000042        67000051        0.000000        +       0       gene_id &quot;NM_001308203&quot;; transcript_id &quot;NM_001308203&quot;;</span><br><span class="line">chr1    hg19_refGene    exon    66999929        67000051        0.000000        +       .       gene_id &quot;NM_001308203&quot;; transcript_id &quot;NM_001308203&quot;;</span><br><span class="line">chr1    hg19_refGene    CDS     67091530        67091593        0.000000        +       2       gene_id &quot;NM_001308203&quot;; transcript_id &quot;NM_001308203&quot;;</span><br><span class="line">chr1    hg19_refGene    exon    67091530        67091593        0.000000        +       .       gene_id &quot;NM_001308203&quot;; transcript_id &quot;NM_001308203&quot;;</span><br></pre></td></tr></table></figure>





<p>中间找了很多，终于找到一个方法，<a target="_blank" rel="noopener" href="https://bioinformatics.stackexchange.com/questions/2548/hg38-gtf-file-with-refseq-annotations">https://bioinformatics.stackexchange.com/questions/2548/hg38-gtf-file-with-refseq-annotations</a></p>
<pre>mysql --user=genome --host=genome-mysql.cse.ucsc.edu -A -N -e "select * from refGene" hg19 ' cut -f2- ' genePredToGtf -source=hg19.refGene.ucsc file stdin stdout > refSeq.hg19.gtf</pre>

<p>genePredToGtf可以从UCSC下载，需要注意的直接下载refFlat的文件（不通过mysql），用genePhredToGtf生成的文件和UCSC table browser下载的gtf文件是一样的，通过mysql下载用genephreadToGtf是我想要的。</p>
<p>比如这样，这才是我想要的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chrX    hg19.refGene.ucsc       exon    70683674        70685855        .       +       .       gene_id &quot;TAF1&quot;; transcript_id &quot;NM_138923&quot;; exon_number &quot;38&quot;; exon_id &quot;NM_138923.38&quot;; gene_name &quot;TAF1&quot;;</span><br><span class="line">chrX    hg19.refGene.ucsc       CDS     70683674        70683893        .       +       1       gene_id &quot;TAF1&quot;; transcript_id &quot;NM_138923&quot;; exon_number &quot;38&quot;; exon_id &quot;NM_138923.38&quot;; gene_name &quot;TAF1&quot;;</span><br><span class="line">chrX    hg19.refGene.ucsc       start_codon     70586225        70586227        .       +       0       gene_id &quot;TAF1&quot;; transcript_id &quot;NM_138923&quot;; exon_number &quot;1&quot;; exon_id &quot;NM_138923.1&quot;; gene_name &quot;TAF1&quot;;</span><br><span class="line">chrX    hg19.refGene.ucsc       stop_codon      70683894        70683896        .       +       0       gene_id &quot;TAF1&quot;; transcript_id &quot;NM_138923&quot;; exon_number &quot;38&quot;; exon_id &quot;NM_138923.38&quot;; gene_name &quot;TAF1&quot;;</span><br></pre></td></tr></table></figure>




<p>Ref: <a target="_blank" rel="noopener" href="https://bioinformatics.stackexchange.com/questions/2548/hg38-gtf-file-with-refseq-annotations">https://bioinformatics.stackexchange.com/questions/2548/hg38-gtf-file-with-refseq-annotations</a></p>
<p>#####################################################################<br>#版权所有 转载请告知 版权归作者所有 如有侵权 一经发现 必将追究其法律责任<br>#Author: Jason<br>#####################################################################</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1063/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1063/" class="post-title-link" itemprop="url">TCGABiolinks下载TCGA数据做生存分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-06-10 10:30:37" itemprop="dateCreated datePublished" datetime="2019-06-10T10:30:37+08:00">2019-06-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="/wp/f4w/2020/2019-06-09-TCGABiolinks-Rplot.png"></p>
<p>以前的工作是全基因组或全外分析，不涉及癌症和生存分析，但现在的工作主要围绕癌症方面，生存分析一定少不了。实验室小伙伴推荐用TCGAbiolinks下载TCGA的数据，于是研究了如何用TCGABiolinks下载TCGA的数据，以下载RNA的count数据为例，并做生存分析。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"># 安装相关的包</span><br><span class="line">if (!requireNamespace(&quot;BiocManager&quot;, quietly=TRUE))   </span><br><span class="line">  install.packages(&quot;BiocManager&quot;)</span><br><span class="line">BiocManager::install(&quot;TCGAbiolinks&quot;)</span><br><span class="line">BiocManager::install(&quot;SummarizedExperiment&quot;)</span><br><span class="line">install.packages(&#x27;survival&#x27;)</span><br><span class="line">install.packages(&#x27;survminer&#x27;)</span><br><span class="line">library(SummarizedExperiment)</span><br><span class="line">library(TCGAbiolinks)</span><br><span class="line">library(survival)</span><br><span class="line">library(survminer)</span><br><span class="line"></span><br><span class="line"># 项目的概括信息，project的名称可以从 https://portal.gdc.cancer.gov/ 上面选择对应的器官，进入之后左侧列表中就会显示。我们以下载TCGA-LIHC项目的数据为例。</span><br><span class="line">TCGAbiolinks:::getProjectSummary(&quot;TCGA-LIHC&quot;) </span><br><span class="line"># 获取该项目样本的临床信息</span><br><span class="line">clinical &lt;- GDCquery_clinic(project = &quot;TCGA-LIHC&quot;, type = &quot;clinical&quot;)</span><br><span class="line"></span><br><span class="line"># 下载TCGA-LIHC项目的rna-seq的counts数据,构建GDCquery，具体的数据类型的写法可以参考 https://portal.gdc.cancer.gov/repository 左侧列表</span><br><span class="line"># 比如data type有Raw Simple Somatic Mutation, Annotated Somatic Mutation, Aligned Reads, Gene Expression Quantification, Slide Image这几种，不过不同的项目，有可能有不同的数据类型。</span><br><span class="line">query &lt;- GDCquery(project = &quot;TCGA-LIHC&quot;, </span><br><span class="line">		    experimental.strategy = &quot;RNA-Seq&quot;,</span><br><span class="line">                    data.category = &quot;Transcriptome Profiling&quot;, </span><br><span class="line">                    data.type = &quot;Gene Expression Quantification&quot;,</span><br><span class="line">		    workflow.type = &quot;HTSeq - Counts&quot;)</span><br><span class="line"># 下载数据</span><br><span class="line">GDCdownload(query)</span><br><span class="line"># 导入数据</span><br><span class="line">LIHCRnaseq &lt;- GDCprepare(query)</span><br><span class="line"># 得到样本的基因counts矩阵，每行为一个基因，每列为一个样本</span><br><span class="line">count_matrix &lt;- assay(LIHCRnaseq)</span><br><span class="line"></span><br><span class="line"># TCGA样本的编号以&#x27;-&#x27;分割，前三列是患者编号，第四列是类型，一般11表示正常样本，01表示肿瘤样本，见https://gdc.cancer.gov/resources-tcga-users/tcga-code-tables/sample-type-codes</span><br><span class="line">samplesNT &lt;- TCGAquery_SampleTypes(barcode = colnames(count_matrix),typesample = c(&quot;NT&quot;))</span><br><span class="line"># selection of tumor samples &quot;TP&quot;</span><br><span class="line">samplesTP &lt;- TCGAquery_SampleTypes(barcode = colnames(count_matrix),typesample = c(&quot;TP&quot;))</span><br><span class="line"></span><br><span class="line"># 根据ensembl id选择特定基因在癌症样本中的表达</span><br><span class="line">gexp &lt;- count_matrix[c(&quot;ENSG00000198431&quot;),samplesTP]</span><br><span class="line"></span><br><span class="line"># 这样选出的样本都是肿瘤样本，但样本名称是TCGA-CC-A7IL-01A-11R-A33R-07，与clinical信息不对应，需要将名字简化成TCGA-CC-A7IL</span><br><span class="line">names(gexp) &lt;-  sapply(strsplit(names(gexp),&#x27;-&#x27;),function(x) paste0(x[1:3],collapse=&quot;-&quot;))</span><br><span class="line"></span><br><span class="line"># 将表达数据和clinical数据合并，并且挑出来用于做生存分析的数据</span><br><span class="line">clinical$&quot;ENSG00000198431&quot; &lt;- gexp[clinical$submitter_id]</span><br><span class="line">df&lt;-subset(clinical,select =c(submitter_id,vital_status,days_to_death,ENSG00000198431))</span><br><span class="line"></span><br><span class="line">#去掉NA</span><br><span class="line">df &lt;- df[!is.na(df$ENSG00000198431),]</span><br><span class="line"></span><br><span class="line">#取基因的平均值，大于平均值的为H，小于为L</span><br><span class="line">df$exp &lt;- &#x27;&#x27;</span><br><span class="line">df[df$ENSG00000198431 &gt;= mean(df$ENSG00000198431),]$exp &lt;- &quot;H&quot;</span><br><span class="line">df[df$ENSG00000198431 &lt;  mean(df$ENSG00000198431),]$exp &lt;- &quot;L&quot;</span><br><span class="line"></span><br><span class="line"># 将status表示患者结局，1表示删失，2表示死亡</span><br><span class="line">df[df$vital_status==&#x27;Dead&#x27;,]$vital_status &lt;- 2</span><br><span class="line">df[df$vital_status==&#x27;Alive&#x27;,]$vital_status &lt;- 1</span><br><span class="line">df$vital_status &lt;- as.numeric(df$vital_status)</span><br><span class="line"></span><br><span class="line"># 建模</span><br><span class="line">fit &lt;- survfit(Surv(days_to_death, vital_status)~exp, data=df) # 根据表达建模</span><br><span class="line"># 显示P value</span><br><span class="line">surv_pvalue(fit)$pval.txt </span><br><span class="line"># 画图</span><br><span class="line">ggsurvplot(fit,pval=TRUE)</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/archives/1063/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1061/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1061/" class="post-title-link" itemprop="url">误删hyper-v的avhdx文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-19 14:34:05" itemprop="dateCreated datePublished" datetime="2019-05-19T14:34:05+08:00">2019-05-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>因为对hyper-v不是很熟悉，点了一下检查点，生成了一个avhdx文件，这个文件其实后续hyper-v会将其合并到vhdx的虚拟磁盘中。而我当时手贱手工的删除了avhdx文件，导致hyper-v找不到这个文件，vhdx也挂起等待合并，虚拟机迟迟不能启动。</p>
<p>有一种解决办法是文件恢复，但我用了几个文件都没有恢复成。实验室师兄（超级牛）新建了一个虚拟机挂载已有的vhdx文件，尝试用vhdx文件启动，显示不能启动，但在新的虚拟机下没有提示要合并，提示老系统的vhdx还有戏。</p>
<p>于是又新建了一个虚拟机实例，创建虚拟机实例之后，尝试将以前的vhdx文件挂载到新的虚拟机上，重启发现竟然以老的系统启动了。感谢能够启动，避免实验室的数据丢失。</p>
<p><img src="/wp/f4w/2020/2019-05-19-hyper-v.png"> </p>
<p>根据结果反推，第一个shimx64.efi和Ubuntu.vhdx都是以前的系统，第二个shimx64.efi新的虚拟机的，硬盘驱动器已经换成了老系统的。</p>
<p>#####################################################################<br>#版权所有 转载请告知 版权归作者所有 如有侵权 一经发现 必将追究其法律责任<br>#Author: Jason<br>#####################################################################</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1060/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1060/" class="post-title-link" itemprop="url">Fusion Gene Annotation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-15 09:45:45" itemprop="dateCreated datePublished" datetime="2019-05-15T09:45:45+08:00">2019-05-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>STAR-FUSION和FusonAnnotator都属于Trinity Trinity Cancer Transcriptome Analysis Toolkit Fusion-finding modules。<br>CTAT_HumanFusionLib现阶段整合了各种资源帮助分析癌症生物学相关的fusion，同样也鉴别可能在正常样本只能出现的fusion。下载地址：<a target="_blank" rel="noopener" href="https://data.broadinstitute.org/Trinity/CTAT_RESOURCE_LIB/">https://data.broadinstitute.org/Trinity/CTAT_RESOURCE_LIB/</a></p>
<p>FusionAnnotator –genome_lib_dir GRCh37_gencode_v19_CTAT_lib_July192017/ctat_genome_lib_build_dir/ <br>                   –annotate fusions.list.txt<br>fusions.list.txt为star-fusion的结果中的第一列，两个参与融合的基因中间用–连在一起，就可以用FusionAnnotator进行注释，相关的标签会注释到融合基因上。</p>
<p>会有三类标签，每类下面又有很多具体的来源标签：<br>Fusions relevant to cancer biology<br>Individual genes of cancer relevance, which may show up in fusions<br>Red Herrings: Fusion pairs that may not be relevant to cancer, and potential false positives.</p>
<p>通过注释，就可以了解到分析结果中的融合基因是否在其他数据库中出现过，或者可能是和癌症无关的突变。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://github.com/FusionAnnotator/CTAT_HumanFusionLib/wiki">https://github.com/FusionAnnotator/CTAT_HumanFusionLib/wiki</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1057/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1057/" class="post-title-link" itemprop="url">NIS+NFS+SGE</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-05-02 20:48:43" itemprop="dateCreated datePublished" datetime="2019-05-02T20:48:43+08:00">2019-05-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>需求，把多台服务器组成一个cluster(<strong>SGE</strong>)，把一台电脑（比如存储）的home文件件共享给其他服务器(<strong>NFS</strong>)，共用一个home文件夹，并进行用户的统一管理(<strong>NIS</strong>)。</p>
<p>操作系统为操作系统：CentOS，用virtual box虚拟出来的系统做测试。<br>server端：10.0.2.5<br>client或compute端：在同样网段</p>
<p>![](/wp/f4w/2020<br>/2019-05-02-NSF-SGE-NIS.png)</p>
<h1 id="1，NFS共享存储"><a href="#1，NFS共享存储" class="headerlink" title="1，NFS共享存储"></a>1，NFS共享存储</h1><p>通过nfs，实现每台服务器都有同样的路径和文件，便于后续集群管理。这里共享两个路径，一个是server端的/home路径，实现每个服务器都有同样的家目录，一个是/opt/gridengine用于安装SGE。</p>
<h2 id="1-1-Server端："><a href="#1-1-Server端：" class="headerlink" title="1.1 Server端："></a>1.1 Server端：</h2><p>安装相关软件，NFS的端口是不固定的（因此如果客户端连不上的时候，往往需要iptables -F清理一下），客户端要准确的获得NFS服务器所使用的端口，就需要RPC服务。RPC最主要的功能就是记录每个NFS功能所对应的端口号，并且在NFS客户端请求时将该端口和功能对应的信息传递给请求数据的NFS客户端，让客户端可以链接到正确的端口上去，从而实现数据传输。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils rpcbind</span><br></pre></td></tr></table></figure>

<h3 id="开机启动rpcbind"><a href="#开机启动rpcbind" class="headerlink" title="开机启动rpcbind"></a>开机启动rpcbind</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable rpcbind.service</span><br></pre></td></tr></table></figure>

<h3 id="开启rpcbind"><a href="#开启rpcbind" class="headerlink" title="开启rpcbind"></a>开启rpcbind</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start rpcbind.service</span><br></pre></td></tr></table></figure>

<h3 id="设置要共享的目录"><a href="#设置要共享的目录" class="headerlink" title="设置要共享的目录"></a>设置要共享的目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/gridengine</span><br><span class="line">vi /etc/exports</span><br><span class="line">/home 10.0.2.0/255.255.255.0(rw,sync)</span><br><span class="line">/opt/gridengine 10.0.2.0/255.255.255.0(rw,sync)</span><br></pre></td></tr></table></figure>

<h3 id="nfs开机启动和开启服务"><a href="#nfs开机启动和开启服务" class="headerlink" title="nfs开机启动和开启服务"></a>nfs开机启动和开启服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nfs</span><br><span class="line">systemctl start nfs</span><br></pre></td></tr></table></figure>

<h3 id="生效export"><a href="#生效export" class="headerlink" title="生效export"></a>生效export</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exportfs -r -v</span><br></pre></td></tr></table></figure>

<h2 id="1-2-客户端："><a href="#1-2-客户端：" class="headerlink" title="1.2 客户端："></a>1.2 客户端：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils rpcbind</span><br><span class="line">systemctl enable  rpcbind.service</span><br><span class="line">systemctl restart rpcbind.service</span><br><span class="line">systemctl enable nfs</span><br><span class="line">systemctl start  nfs</span><br></pre></td></tr></table></figure>

<h3 id="设置自动挂载，用tab分割，不是空格"><a href="#设置自动挂载，用tab分割，不是空格" class="headerlink" title="设置自动挂载，用tab分割，不是空格"></a>设置自动挂载，用tab分割，不是空格</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/gridengine</span><br><span class="line">vi /etc/fstab</span><br><span class="line">10.0.2.5:/home	/home	nfs	defaults	0	0</span><br><span class="line">10.0.2.5:/opt/gridengine	/opt/gridengine	nfs	defaults	0	0</span><br></pre></td></tr></table></figure>

<h3 id="挂载"><a href="#挂载" class="headerlink" title="挂载"></a>挂载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -a</span><br></pre></td></tr></table></figure>

<p>这样的话，客户端服务器的home目录都是server端的home家目录。</p>
<h1 id="2，NIS-Network-Information-Service"><a href="#2，NIS-Network-Information-Service" class="headerlink" title="2，NIS(Network Information Service)"></a>2，NIS(Network Information Service)</h1><p>通过NIS实现帐号的统一权限管理和认证，避免在多台服务器上重复开设帐号</p>
<h2 id="2-1-Server端："><a href="#2-1-Server端：" class="headerlink" title="2.1 Server端："></a>2.1 Server端：</h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/archives/1057/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1054/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1054/" class="post-title-link" itemprop="url">T细胞，B细胞，抗原，CD4和CD8</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-04-21 17:50:08" itemprop="dateCreated datePublished" datetime="2019-04-21T17:50:08+08:00">2019-04-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="T细胞工作原理"><a href="#T细胞工作原理" class="headerlink" title="T细胞工作原理"></a>T细胞工作原理</h1><p>T细胞在胸腺中发育后，它们可以在血液或淋巴系统中游走或迁移到体内的不同器官。只要特定的入侵者刺激它们，辅助性T细胞就会产生化学物质。有些化学物质触发B细胞发育成浆细胞，而另一些化学物质则刺激杀伤性T细胞靶向并杀死可能被侵入者感染或癌变的细胞。 调节性T细胞有助于控制免疫反应，防止其失控。自然杀伤T细胞也产生化学物质，以帮助调节免疫反应，防止入侵者和肿瘤。在免疫反应结束后，记忆T细胞在体内停留很长一段时间。这样，如果同样的入侵者再次出现，它们就能迅速做出反应，并繁殖产生大量的T细胞来消灭它。</p>
<h1 id="B细胞工作原理"><a href="#B细胞工作原理" class="headerlink" title="B细胞工作原理"></a>B细胞工作原理</h1><p>与T细胞不同，B细胞不能直接攻击受感染的细胞。相反，B细胞主要产生一种叫做抗体的蛋白质，当入侵者在血液中移动时，抗体就可以劫持入侵者。当它们遇到入侵者时，B细胞受到刺激而产生浆细胞和记忆B细胞。 每个浆细胞被专门用来制造一种特殊的抗体——专门用来攻击特定入侵者的蛋白质。抗体的作用是在受感染的细胞上作为标志，这样T细胞就能识别要破坏的细胞。 当入侵者被抗体包裹时，它们更容易成为免疫系统中其他蛋白质的靶标，也更容易成为吞噬细胞这一专门细胞的攻击目标，吞噬细胞负责吞噬外来物质和受感染的细胞。当浆细胞在免疫反应结束后消失时，记忆B细胞就会长期存在。如果同样的入侵者再次出现，抗体已经可以帮助抵抗它。 1、参与方式不同 T细胞参与细胞免疫，B细胞参与体液免疫； 2、形成的位置不同 T细胞形成于胸腺，B细胞形成于骨髓； 3、功能不同 T细胞主要功能是吞噬外来侵袭物，B细胞主要功能是产生各类抗体； 4、数量、形态不同 T细胞数量比B细胞少；B细胞形态比T细胞形态大。 浆细胞又叫做效应B细胞。效应B细胞的产生：当B淋巴细胞受到抗原刺激或受淋巴因子刺激而活化后,将大量增殖并分化为效应B细胞和记忆B细胞.记忆B细胞受刺激后,可直接大量增殖、分化出效应B细胞 效应B细胞的作用：效应B细胞（浆细胞）由B淋巴细胞或记忆B细胞产生,其能分泌抗体执行免疫供能 自然杀伤细胞NK细胞：非特异性攻击</p>
<h1 id="MHC1和MHC2"><a href="#MHC1和MHC2" class="headerlink" title="MHC1和MHC2"></a>MHC1和MHC2</h1><p>MHC1类：将抗原肽递呈给细胞毒性T细胞 MHC2类：专职性抗原递呈给辅助性T细胞（Th） MHC1在机体大多数细胞中都有表达，主要是自身受病毒或胞内寄生菌感染以后将病原肽递呈出来让CTL细胞（细胞毒性T细胞，cytotoxic T cell，TC或CTL，也称杀手细胞）识别然后破坏受感染细胞。而表达MHCII的主要是专职的抗原递呈细胞，包括DC，巨噬和B细胞，将病原主动摄取后递呈给Th细胞，从而辅助后期B细胞或者巨噬细胞</p>
<h1 id="抗原"><a href="#抗原" class="headerlink" title="抗原"></a>抗原</h1><p>外源性抗原—&gt;MHC II—&gt;CD4+ 外源性抗原经吞噬或吞饮作用，被APC摄入胞内形成吞噬体，后者与溶酶体融合形成吞噬溶酶体。抗原在吞噬溶酶体内酸性环境中被蛋白水解酶降解为小分子多肽，其中具有免疫原性的称为抗原肽。内质网中合成的MHC-Ⅱ类分子进入高尔基体后，由分泌小泡携带，通过与吞噬溶酶体融合，使抗原肽与小泡内MHC-Ⅱ类分子结合形成抗原肽-MHCⅡ类分子复合物。该复合物表达于APC表面，可被相应CD4+T细胞识别结合。 内源性抗原–&gt;MHC I–&gt;CD8+ 内源性抗原是指细胞自身合成的抗原，如肿瘤抗原和病毒蛋白抗原等。内源性抗原在细胞内生成后，可被存在于胞质中的蛋白酶体，即小分子聚合多肽体（LMP）降解成小分子多肽；小分子多肽与热休克蛋白70/90在胞质内结合后，经抗原肽转运体（TAP）转运到内质网中，通过加工修饰成为具有免疫原性的抗原肽；抗原肽与内质网中合成的MHCⅠ类分子结合，形成抗原肽-MHCⅠ类分子结合形成抗原肽-MHCⅠ类分子复合物；后者转入高尔基体再通过分泌小泡将其运送到APC表面，供相应CD8+T细胞识别结合。</p>
<h1 id="CD4和CD8"><a href="#CD4和CD8" class="headerlink" title="CD4和CD8"></a>CD4和CD8</h1><p>CD4+细胞，有称辅助性T细胞，在细胞包面表达CD4+分子，在免疫过程中协助白细胞，包括B细胞成熟和记忆b细胞，活化细胞毒性T细胞和巨噬细胞，辅助性T细胞被MHC II上的抗原激活，迅速分化和分泌调节免疫活性的细胞因子小蛋白。活化的细胞可分为 TH1, TH2, TH3, TH17, TH9, or TFH,亚型，取决于抗原呈递细胞APC的信号。 CD8+细胞，细胞毒性T细胞（TC cells, CTLs, T-killer cells, killer T cells)，细胞表面表达CD8糖蛋白，摧毁病毒感染细胞和肿瘤细胞，这些细胞通过与MHC I分子（所有细胞都表达）上的抗原结合识别攻击对象。 通过IL-10，腺苷和其他调节T细胞分泌的分子调节，CD8+细胞可以进入无活性状态，以免发生自身免疫病。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1051/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1051/" class="post-title-link" itemprop="url">肿瘤细胞免疫逃逸的几种方式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-04-11 19:08:25" itemprop="dateCreated datePublished" datetime="2019-04-11T19:08:25+08:00">2019-04-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>肿瘤中的新抗原neoantigen引起的T细胞介导的免疫监视会影响肿瘤的进化，新抗原的缺失或者抗原呈递功能受损都会导致肿瘤的免疫逃逸。可能有以下几点：</p>
<p>1，DNA水平：通过拷贝数丢失，导致neoantigen也发生丢失</p>
<p>2，RNA水平：抑制包含neoantigen的转录本表达</p>
<p>3，表观水平：沉默编码neoantigen的片断</p>
<p>4，翻译后水平：蛋白质降解，呈递功能缺失等</p>
<p>5，免疫系统的选择性纯化：清除包含neoantigen的肿瘤亚克隆。</p>
<p>参考：Neoantigen-directed immune escape in lung cancer evolution</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1047/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1047/" class="post-title-link" itemprop="url">想用smrt analysis-2.3的过来看看</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-03-29 18:39:05" itemprop="dateCreated datePublished" datetime="2019-03-29T18:39:05+08:00">2019-03-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近找smrt analysis 2.3的程序，真是太辛苦了。我不想用SMRT的图形界面，pacbio又把github上的相关项目obsolete了，tofu项目也没了，pbtranscript装起来各种错误，实在要放弃了，还好看到有人做了2.3的docker镜像。用最近的SMRT6.0中的isoseq3的同学可以忽略本文，isoseq3请移步<a target="_blank" rel="noopener" href="https://github.com/PacificBiosciences/IsoSeq3/blob/master/README_v3.1.md">https://github.com/PacificBiosciences/IsoSeq3/blob/master/README_v3.1.md</a>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">docker pull bowhan/smrtanalysis-2.3.0.140936</span><br><span class="line">docker run -it -v /home/bowhan/myData:/data bowhan/smrtanalysis-2.3.0.140936 bash</span><br><span class="line"># -v 挂载目录</span><br><span class="line"></span><br><span class="line">#进入smrtshell，有smrtanalysis的环境</span><br><span class="line">/opt/smrtanalysis/current/smrtcmds/bin/smrtshell</span><br><span class="line"># 以iso-seq数据处理为例</span><br><span class="line"># 1. CCS 根据fofn中的h5文件，生成CCS</span><br><span class="line">ConsensusTools.sh CircularConsensus  \</span><br><span class="line">    --minFullPasses 0  --minPredictedAccuracy 75 \</span><br><span class="line">    --parameters /opt/smrtanalysis/install/smrtanalysis_2.3.0.140936/analysis/etc/algorithm_parameters/2014-09/ \</span><br><span class="line">    --numThreads 8 --fofn input.fofn \</span><br><span class="line">    -o /data/output</span><br><span class="line"></span><br><span class="line"># 2. classify</span><br><span class="line">pbtranscript.py classify \</span><br><span class="line">    --cpus 8 --min_seq_len 300 \</span><br><span class="line">    --flnc $&#123;prefix&#125;.isoseq_flnc.fasta \</span><br><span class="line">    --nfl $&#123;prefix&#125;.isoseq_nfl.fasta \</span><br><span class="line">    -d $&#123;prefix&#125;.out \</span><br><span class="line">    $&#123;prefix&#125;.ccs.fa \</span><br><span class="line">    $&#123;prefix&#125;.isoseq_draft.fasta </span><br><span class="line"></span><br><span class="line"># 3. cluster</span><br><span class="line">pbtranscript.py cluster \</span><br><span class="line">    isoseq_flnc.fasta final.consensus.fa \</span><br><span class="line">    --nfl_fa isoseq_nfl.fasta -d clusterOut \</span><br><span class="line">    --ccs_fofn reads_of_insert.fofn --bas_fofn input.fofn \</span><br><span class="line">    --cDNA_size under1k --quiver --blasr_nproc 8 \</span><br><span class="line">    --quiver_nproc 8 </span><br></pre></td></tr></table></figure>
<p>本文转自<a target="_blank" rel="noopener" href="https://hub.docker.com/r/bowhan/smrtanalysis-2.3.0.140936/">https://hub.docker.com/r/bowhan/smrtanalysis-2.3.0.140936/</a><br>其他参考：<a target="_blank" rel="noopener" href="https://github.com/ben-lerch/IsoSeq-3.0">https://github.com/ben-lerch/IsoSeq-3.0</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1046/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1046/" class="post-title-link" itemprop="url">一步到位下载hg19基因组文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-03-25 18:35:20" itemprop="dateCreated datePublished" datetime="2019-03-25T18:35:20+08:00">2019-03-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>hg19对应GRCh37，UCSC提供hg19的参考基因组下载。UCSC的下载地址在<a href="ftp://hgdownload.cse.ucsc.edu/goldenPath/hg19/chromosomes/">ftp://hgdownload.cse.ucsc.edu/goldenPath/hg19/chromosomes/</a></p>
<p>需要经过下载每个染色体，然后解压合并成一个整个的基因组文件<br><a href="ftp://hgdownload.cse.ucsc.edu/goldenPath/hg19/chromosomes/">ftp://hgdownload.cse.ucsc.edu/goldenPath/hg19/chromosomes/</a></p>
<p>其实这样有点浪费时间，还要考虑合并的时候染色体的顺序是否按照1，2，3而不是1，10，11排下来的。目前我知道的最简单的办法的，从GATK bundle中下载。比如hg19整个基因组的文件。下面是一步到位的命令，包括了fasta，fai，dict文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c ftp://gsapubftp-anonymous@ftp.broadinstitute.org/bundle/hg19/ucsc.hg19*</span><br></pre></td></tr></table></figure>



<p>GATK bundle还提供一下其他文件，可以看看( <a href="ftp://ftp.broadinstitute.org/bundle">ftp://ftp.broadinstitute.org/bundle</a> )，比如dict文件，hg38文件等。当然构建参考基因组不一定非要合并染色体，个人习惯。</p>
<p>补充：UCSC也提供一个genome.fa的下载，<a href="ftp://hgdownload.cse.ucsc.edu/goldenPath/hg19/bigZips/chromFa.tar.gz">ftp://hgdownload.cse.ucsc.edu/goldenPath/hg19/bigZips/chromFa.tar.gz</a></p>
<p>此外Gencode也提供了丰富的注释和统一的基因组序列: <a target="_blank" rel="noopener" href="https://www.gencodegenes.org/human/">https://www.gencodegenes.org/human/</a>,  要注意是否是你需要的基因组版本</p>
<p>NCBI也提供genome fasta，不过需要自己转换下染色体的ID。</p>
<p>#####################################################################<br>#版权所有 转载请告知 版权归作者所有 如有侵权 一经发现 必将追究其法律责任<br>#Author: Jason<br>#####################################################################</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://md.zxzyl.com/archives/1044/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jason">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhongxu's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/archives/1044/" class="post-title-link" itemprop="url">Generate Accurate Consensus Sequences from a Single SMRTbell</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-03-22 18:23:09" itemprop="dateCreated datePublished" datetime="2019-03-22T18:23:09+08:00">2019-03-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Default-Category/" itemprop="url" rel="index"><span itemprop="name">Default Category</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="/wp/f4w/2020/2019-03-22-PACBIO-ZMW-read.png" alt="Circular-Consensus-Sequence"></p>
<h1 id="bax2bam"><a href="#bax2bam" class="headerlink" title="bax2bam"></a>bax2bam</h1><p>bax2bam -o mynewbam mydata.1.bax.h5 mydata.2.bax.h5 mydata.3.bax.h5</p>
<h1 id="circus-consensus-sequence"><a href="#circus-consensus-sequence" class="headerlink" title="circus consensus sequence"></a>circus consensus sequence</h1><p><img src="/wp/f4w/2020/2019-03-22-PB-PACBIO-Circular-Consensus-Sequence.png" alt="Circular-Consensus-Sequence"></p>
<p>ccs –minLength=100 myData.subreads.bam myResult.bam</p>
<p>进行CCS由pacbio测序系统决定的，插入序列测多遍之后，可以用来校正随机错误。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://github.com/PacificBiosciences/unanimity/blob/develop/doc/PBCCS.md">https://github.com/PacificBiosciences/unanimity/blob/develop/doc/PBCCS.md</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jason</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">163</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">167</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>


<!--google_adsense-->

  <div class="links-of-blogroll-title">
    <i class="fa fa-google"></i> AdSense
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-9370593480269435"
        data-ad-slot="8824957305"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>

<!--/google_adsense-->



    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

<script data-ad-client="ca-pub-9370593480269435" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- PGAD -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9370593480269435"
     data-ad-slot="8824957305"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
